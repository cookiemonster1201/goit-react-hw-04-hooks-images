{"version":3,"sources":["components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ButtonUp/ButtonUp.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","App.module.css","components/SearchBar/SearchBar.module.css","components/SearchBar/SearchBar.jsx","sevices/image-search-api.js","components/ImageGallery/ErrorView/error-img.png","components/ImageGallery/ErrorView/ErrorView.jsx","components/ImageGallery/IdleView/welcome-img.png","components/ImageGallery/IdleView/IdleView.jsx","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGalleryList/ImageGalleryList.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/ButtonUp/up-arrow.png","components/ButtonUp/ButtonUp.jsx","components/ImageGallery/ImageGallery.jsx","App.jsx","index.js"],"names":["module","exports","SearchBar","onSubmit","useState","inputValue","setInputValue","searchBar","s","searchForm","button","label","input","className","e","preventDefault","currentTarget","query","value","trim","normalizedQuery","toLowerCase","reset","toast","info","type","name","autoComplete","autoFocus","placeholder","onChange","ImageSearchApi","key","url","this","page","baseUrl","a","searchParams","URLSearchParams","q","axios","get","response","data","hits","searchQuery","newQuery","ErrorView","style","paddingTop","src","errorImg","alt","width","margin","IdleView","welcomeImg","ImageGalleryItem","image","webformatURL","tags","item","ImageGalleryList","images","trackScroll","handleOpenModal","gallery","useEffect","window","addEventListener","removeEventListener","onClick","map","id","Button","modalRoot","document","querySelector","Modal","closeModal","handleGalleryNav","imgIdx","children","modal","overlay","onGalleryNav","code","length","createPortal","target","ButtonUp","isVisible","visible","classNames","buttonUp","imageSearchApi","ImageGallery","setImages","showModal","setShowModal","showGoUpBtn","setShowGoUpBtn","showLoadMoreBtn","setShowLoadMoreBtn","showLoader","setShowLoader","activeIdx","setActiveIdx","status","setStatus","showImages","fetchData","fetchedImages","warning","prevImages","incrementPage","error","toggleModal","resetPage","scrollTo","top","documentElement","scrollHeight","behavior","nodeName","source","forEach","idx","findActiveIdx","scrolled","pageYOffset","coords","clientHeight","color","height","goBackToTop","scrollBy","setTimeout","largeImageURL","App","setQuery","grid","autoClose","theme","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4e47fd96.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ImageGalleryItem_image__32_jr\",\"item\":\"ImageGalleryItem_item__26F25\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ButtonUp_button__3ZzUV\",\"visible\":\"ButtonUp_visible__1m1Ff\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__gboaM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3QF_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"App_grid__3DnSg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"SearchBar_searchForm__bTf69\",\"button\":\"SearchBar_button__zjQ9i\",\"label\":\"SearchBar_label__3cqEl\",\"input\":\"SearchBar_input__35An9\",\"searchBar\":\"SearchBar_searchBar__1u-sB\"};","import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport s from 'components/SearchBar/SearchBar.module.css';\n\nexport default function SearchBar({ onSubmit }) {\n  const [inputValue, setInputValue] = useState('');\n\n  function handleChange({ currentTarget: { value } }) {\n    setInputValue(value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (e.currentTarget.query.value.trim() === '') {\n      toast.info('please type a query');\n      return;\n    }\n    const normalizedQuery = e.currentTarget.query.value.trim().toLowerCase();\n    onSubmit(normalizedQuery);\n    setInputValue('');\n    e.currentTarget.reset();\n  }\n\n  const { searchBar, searchForm, button, label, input } = s;\n  return (\n    <header className={searchBar}>\n      <form className={searchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={button}>\n          <span className={label}>Search</span>\n        </button>\n\n        <input\n          className={input}\n          name=\"query\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={inputValue}\n          onChange={handleChange}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchBar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import axios from 'axios';\n\nexport default class ImageSearchApi {\n  constructor(key, url) {\n    this.query = '';\n    this.page = 1;\n    this.key = key;\n    this.baseUrl = url;\n  }\n\n  async fetchData() {\n    const searchParams = new URLSearchParams({\n      q: this.query,\n      page: this.page,\n      key: this.key,\n    });\n    const url = `${this.baseUrl}image_type=photo&orientation=horizontal&per_page=12&${searchParams}`;\n    const response = await axios.get(url);\n    return response.data.hits;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  get searchQuery() {\n    return this.searchQuery;\n  }\n\n  set searchQuery(newQuery) {\n    this.query = newQuery;\n  }\n}\n","export default __webpack_public_path__ + \"static/media/error-img.64aecb11.png\";","import errorImg from 'components/ImageGallery/ErrorView/error-img.png';\n\nexport default function ErrorView() {\n  return (\n    <div style={{ paddingTop: '100px' }}>\n      <img\n        src={errorImg}\n        alt=\"welcome\"\n        width={600}\n        style={{ margin: '0 auto' }}\n      />\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/welcome-img.60dcdefa.png\";","import welcomeImg from 'components/ImageGallery/IdleView/welcome-img.png';\n\nexport default function IdleView() {\n  return (\n    <div style={{ paddingTop: '100px' }}>\n      <img\n        src={welcomeImg}\n        alt=\"welcome\"\n        width={800}\n        style={{ margin: '0 auto' }}\n      />\n    </div>\n  );\n}\n","import PropTypes from 'prop-types';\nimport s from 'components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css';\nexport default function ImageGalleryItem({ image: { webformatURL, tags } }) {\n  const { image, item } = s;\n  return (\n    <li className={item}>\n      <img src={webformatURL} alt={tags} className={image} />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  image: PropTypes.shape({\n    webformatURL: PropTypes.string.isRequired,\n    tags: PropTypes.string.isRequired,\n  }).isRequired,\n};\n","import { useEffect } from 'react';\nimport ImageGalleryItem from 'components/ImageGallery/ImageGalleryItem';\nimport s from 'components/ImageGallery/ImageGallery.module.css';\n\nimport PropTypes from 'prop-types';\nexport default function ImageGalleryList({\n  images,\n  trackScroll,\n  handleOpenModal,\n}) {\n  const { gallery } = s;\n\n  useEffect(() => {\n    window.addEventListener('scroll', trackScroll);\n    return window.removeEventListener('scroll', trackScroll);\n  }, [trackScroll]);\n\n  return (\n    <ul className={gallery} onClick={handleOpenModal}>\n      {images &&\n        images.map(image => <ImageGalleryItem key={image.id} image={image} />)}\n    </ul>\n  );\n}\n\nImageGalleryList.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape).isRequired,\n  showImages: PropTypes.func.isRequired,\n  handleOpenModal: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport s from 'components/Button/Button.module.css';\nexport default function Button({ onClick }) {\n  const { button } = s;\n  return (\n    <button type=\"button\" className={button} onClick={onClick}>\n      <span>Show more</span>\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport s from 'components/Modal/Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({\n  closeModal,\n  handleGalleryNav,\n  imgIdx,\n  children,\n  images,\n}) {\n  const { modal, overlay } = s;\n\n  useEffect(() => {\n    window.addEventListener('keydown', onGalleryNav);\n    return () => {\n      window.removeEventListener('keydown', onGalleryNav);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onGalleryNav = ({ code }) => {\n    switch (code) {\n      case 'Escape':\n        closeModal();\n        break;\n\n      case 'ArrowRight':\n        if (imgIdx >= images.length - 1) {\n          handleGalleryNav((imgIdx = 0));\n        } else {\n          handleGalleryNav(++imgIdx);\n        }\n        break;\n\n      case 'ArrowLeft':\n        if (imgIdx <= 0) {\n          handleGalleryNav((imgIdx = images.length - 1));\n        } else {\n          handleGalleryNav(--imgIdx);\n        }\n        break;\n\n      default:\n        toast.info('Press ESC to exit');\n    }\n  };\n\n  const handleBackdropClick = ({ target, currentTarget }) => {\n    if (target === currentTarget) {\n      closeModal();\n    }\n  };\n\n  return createPortal(\n    <div className={overlay} onClick={handleBackdropClick}>\n      <div className={modal}>{children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\nModal.propTypes = {\n  closeModal: PropTypes.func.isRequired,\n  handleGalleryNav: PropTypes.func.isRequired,\n  imgIdx: PropTypes.number.isRequired,\n  images: PropTypes.arrayOf(PropTypes.shape).isRequired,\n};\n","export default __webpack_public_path__ + \"static/media/up-arrow.79fd32b5.png\";","import classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport buttonUp from './up-arrow.png';\nimport s from 'components/ButtonUp/ButtonUp.module.css';\n\nexport default function ButtonUp({ onClick, isVisible }) {\n  const { button, visible } = s;\n  return (\n    <button\n      type=\"button\"\n      className={isVisible ? classNames(button, visible) : button}\n      onClick={onClick}\n    >\n      <img src={buttonUp} alt=\"go up\" />\n    </button>\n  );\n}\n\nButtonUp.propTypes = {\n  isVisible: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n","import { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nimport ImageSearchApi from 'sevices/image-search-api';\nimport ErrorView from 'components/ImageGallery/ErrorView';\nimport IdleView from 'components/ImageGallery/IdleView';\nimport ImageGalleryList from 'components/ImageGallery/ImageGalleryList/ImageGalleryList';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\nimport ButtonUp from 'components/ButtonUp/ButtonUp';\n\nconst KEY = '22995461-dcfca2d4906f7ecb85a6d619d';\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst imageSearchApi = new ImageSearchApi(KEY, BASE_URL);\n\nexport default function ImageGallery({ query }) {\n  const [images, setImages] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [showGoUpBtn, setShowGoUpBtn] = useState(false);\n  const [showLoadMoreBtn, setShowLoadMoreBtn] = useState(false);\n  const [showLoader, setShowLoader] = useState(false);\n  const [activeIdx, setActiveIdx] = useState(0);\n  const [status, setStatus] = useState('idle');\n\n  useEffect(() => {\n    if (query.trim() === '') {\n      return;\n    }\n    setImages([]);\n    imageSearchApi.searchQuery = query;\n    imageSearchApi.resetPage();\n    showImages();\n  }, [query]);\n\n  useEffect(() => {\n    if (images.length < 12) {\n      setShowLoadMoreBtn(false);\n    } else {\n      setShowLoadMoreBtn(true);\n    }\n    if (images.length > 12) {\n      scrollDown();\n    }\n  }, [images.length, showLoadMoreBtn]);\n\n  async function showImages() {\n    setShowLoader(true);\n    try {\n      const fetchedImages = await imageSearchApi.fetchData();\n\n      if (fetchedImages.length === 0) {\n        toast.warning(\"Sorry, we couldn't find anything\");\n        setStatus('idle');\n        return;\n      }\n\n      setImages(prevImages => [...prevImages, ...fetchedImages]);\n      setStatus('resolved');\n      setShowLoader(false);\n      imageSearchApi.incrementPage();\n    } catch {\n      setStatus('rejected');\n      toast.error('Something went wrong...(');\n    }\n  }\n\n  function scrollDown() {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  function trackScroll() {\n    let scrolled = window.pageYOffset;\n    let coords = document.documentElement.clientHeight;\n\n    if (scrolled > coords) {\n      setShowGoUpBtn(true);\n    }\n    if (scrolled < coords) {\n      setShowGoUpBtn(false);\n    }\n  }\n\n  function goBackToTop() {\n    if (window.pageYOffset > 0) {\n      window.scrollBy(0, -80);\n      setTimeout(goBackToTop, 0);\n    }\n  }\n\n  function toggleModal() {\n    setShowModal(modal => !modal);\n  }\n\n  function onOpenModal({ target }) {\n    if (target.nodeName !== 'IMG') {\n      return;\n    }\n    const activeIdx = findActiveIdx(target.src);\n    setActiveIdx(activeIdx);\n    toggleModal();\n  }\n\n  function findActiveIdx(source) {\n    let activeIdx;\n    images.forEach(({ webformatURL }, idx) => {\n      if (webformatURL === source) {\n        activeIdx = idx;\n      }\n    });\n    return activeIdx;\n  }\n\n  if (status === 'idle') {\n    return <IdleView />;\n  }\n\n  if (status === 'rejected') {\n    return <ErrorView />;\n  }\n\n  if (status === 'resolved') {\n    return (\n      <>\n        <ImageGalleryList\n          images={images}\n          showImages={showImages}\n          handleOpenModal={onOpenModal}\n          trackScroll={trackScroll}\n        />\n        {showLoader && (\n          <Loader\n            type=\"Oval\"\n            color=\"#da5f01\"\n            height={80}\n            width={80}\n            style={{ margin: '0 auto' }}\n          />\n        )}\n        {showLoadMoreBtn && <Button onClick={showImages} />}\n\n        {<ButtonUp onClick={goBackToTop} isVisible={showGoUpBtn} />}\n        {showModal && (\n          <Modal\n            closeModal={toggleModal}\n            handleGalleryNav={setActiveIdx}\n            imgIdx={activeIdx}\n            images={images}\n          >\n            <img\n              src={images[activeIdx].largeImageURL}\n              alt={images[activeIdx].tags}\n              width={1000}\n            />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  query: PropTypes.string.isRequired,\n};\n","import { useState } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport SearchBar from 'components/SearchBar';\nimport ImageGallery from 'components/ImageGallery';\nimport s from './App.module.css';\n\nexport default function App() {\n  const [query, setQuery] = useState('');\n\n  const { grid } = s;\n  return (\n    <div className={grid}>\n      <SearchBar onSubmit={setQuery} />\n      <ImageGallery query={query} />\n      <ToastContainer autoClose={3000} theme=\"dark\" />\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}